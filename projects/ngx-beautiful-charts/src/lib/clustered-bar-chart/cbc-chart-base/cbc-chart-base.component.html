<!-- <svg:pattern [attr.id]="gridID" 
[attr.x]="clusteredBarChartService.xPadding" [attr.y]="clusteredBarChartService.yPadding" 
[attr.width]="gridWidthX" [attr.height]="gridWidthY" 
patternUnits="userSpaceOnUse">
    <svg:path [attr.d]="gridPath" fill="none" stroke="#444444" stroke-width="0.5" />
</svg:pattern> -->

<svg:rect [attr.x]="clusteredBarChartService.xPadding" 
[attr.y]="clusteredBarChartService.yPadding" 
[attr.width]="clusteredBarChartService.rectWidth" 
[attr.height]="clusteredBarChartService.rectHeight" 
stroke="#444444" fill="none" stroke-width="1"/>

<svg:g *ngIf="showGridLines">
  <svg:path *ngFor="let yLevelPath of yLevelPaths"
  class="bar-chart-level"
  [attr.d]="yLevelPath" fill="none" stroke="#444444" />
</svg:g>

<svg:text
*ngFor="let x of xAxis" class="axis-text" 
[attr.x]="x.xPos" [attr.y]="positions['xTick']" [attr.font-size]="fontSizeXAxisTickLabel"
text-anchor="middle" dominant-baseline="middle"> {{ x.value }} </svg:text>

<svg:text
*ngFor="let y of yAxis" class="axis-text" 
[attr.y]="y.yPos" [attr.x]="positions['yTick']" [attr.font-size]="fontSizeYAxisTickLabel">{{ y.value }}</svg:text>

<!-- x Axis Title -->
<svg:text class="axis-title" 
  [attr.x]="positions['xTitle'].x" [attr.font-size]="fontSizeXAxisTitle" 
  [attr.y]="positions['xTitle'].y" dominant-baseline="middle" text-anchor="middle"> 
  {{ xAxisTitle }} 
</svg:text>

<!-- y Axis Title -->
<svg:text class="axis-title" 
  [attr.x]="positions['yTitle'].x" [attr.font-size]="fontSizeYAxisTitle" 
  [attr.y]="positions['yTitle'].y" dominant-baseline="middle" text-anchor="middle" transform="rotate(270)"> 
  {{ yAxisTitle }} 
</svg:text>


<!-- Legion -->
<svg:rect [attr.x]="2*clusteredBarChartService.xPadding + clusteredBarChartService.rectWidth" 
[attr.y]="clusteredBarChartService.yPadding" 
[attr.width]="clusteredBarChartService.legionWidth" 
[attr.height]="clusteredBarChartService.legionHeight" 
fill="#f1f1f1" />


<svg:g *ngFor="let x of clusteredBarChartService.data; index as i">
    <svg:rect *ngIf="clusteredBarChartService.legionWidth" 
    [attr.x]="clusteredBarChartService.rectWidth + 2*clusteredBarChartService.xPadding + clusteredBarChartService.legionWidth / 4 * .3" 
    [attr.y]="clusteredBarChartService.yPadding+40+30*i - fontSizeLegend * 1.1" 
    [attr.width]="fontSizeLegend" 
    [attr.height]="fontSizeLegend" 
    [attr.fill]="x.color" />
    
    <svg:text class="legend-text" *ngIf="clusteredBarChartService.legionWidth"  [attr.font-size]="fontSizeLegend" 
    [attr.x]="clusteredBarChartService.rectWidth + 2*clusteredBarChartService.xPadding + clusteredBarChartService.legionWidth / 4" 
    [attr.y]="clusteredBarChartService.yPadding+40+30*i"> {{ x.series }} </svg:text>
</svg:g>

